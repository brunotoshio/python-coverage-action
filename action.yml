name: 'Convert json to markdown'
description: |
  Creates a simple markdown string from the json 
  report generated by coverage.py.
inputs:
  filepath:
    required: true
    description: Path of the file containing the coverage report (json)
  threshold_bad:
    required: false
    description: the upper threshold for bad coverage
    default: '70'
  threshold_acceptable:
    required: false
    description: the upper threshold for acceptable coverage
    default: '90'
  threshold_pass:
    required: false
    description: the minimum coverage required to be approved to merge
    default: '70'
outputs:
  result:
    description: The string content of the generated markdown file
  passed:
    description: The minimum coverage is achieved or not
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.filepath }}
